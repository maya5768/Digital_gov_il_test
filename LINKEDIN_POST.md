# 🚀 פרויקט בדיקות אוטומטיות לאתרי ממשל ישראליים

## 🎯 מהו Cypress?

**Cypress** הוא כלי בדיקות אוטומטיות מתקדם לאפליקציות ווב, המאפשר ביצוע בדיקות End-to-End (E2E) מהירות ואמינות. הכלי בולט ביכולותיו המתקדמות כמו:
- **בדיקות בזמן אמת** - צפייה בריצת הבדיקות בדפדפן בפועל
- **יירוט בקשות רשת** - שליטה מלאה על בקשות HTTP ותגובות שרת
- **תיעוד אוטומטי** - צילום מסך ווידאו אוטומטי של כל בדיקה
- **טיפול בטעינות אסינכרוניות** - המתנה אוטומטית לטעינת אלמנטים
- **דיבוג מתקדם** - כלים ידידותיים לאיתור ותיקון בעיות

בפרויקט זה, השתמשתי ב-Cypress גרסה 13.6.0 לבדיקת אתרי ממשל ישראליים, כולל פתרון אתגרים טכניים כמו חסימות CORS ובעיות אבטחת cross-origin.

---

## 📋 סקירת הבדיקות שביצעתי

### 🔍 בדיקה #1: בדיקת רכיבי חיפוש
**קובץ:** `1-search-component-tests.cy.js`  
**תוצאה:** ✅ 3/3 בדיקות עברו בהצלחה

**🎯 מטרת הבדיקה:**  
לוודא שרכיבי החיפוש באתרי ממשל ישראליים (gov.il ו-govisit.gov.il) עובדים כראוי ומספקים חווית משתמש תקינה.

**📝 צעדי הבדיקה:**
1. **בדיקת נראות כפתור החיפוש:**
   - גישה לאתר gov.il
   - המתנה לטעינת מלאה של הדף
   - זיהוי כפתור החיפוש במבנה ה-DOM
   - וידוא שהכפתור גלוי וניתן ללחיצה
   - לחיצה על הכפתור ובדיקת תגובתיות העמוד

2. **בדיקת אלמנטי ממשק החיפוש:**
   - לחיצה על כפתור החיפוש
   - חיפוש אלמנטים הקשורים לחיפוש (שדות קלט, placeholder בעברית)
   - ניסיון הזנת טקסט: "תעודת זהות"
   - וידוא תקינות ה-URL לאחר האינטראקציה

3. **בדיקת אינטראקציה עם רכיב החיפוש:**
   - לחיצות מרובות על כפתור החיפוש (בדיקת toggle)
   - זיהוי חלונות קופצים (modal), תפריטים נפתחים (dropdown)
   - סריקת שדות קלט שהופיעו
   - וידוא שהדף נשאר פונקציונלי לאחר כל האינטראקציות

---

### 🌐 בדיקה #2: יירוט ואימות בקשות HTTP
**קובץ:** `2-intercept-requests.cy.js`  
**תוצאה:** ✅ 3/3 בדיקות עברו בהצלחה

**🎯 מטרת הבדיקה:**  
לוודא שכל בקשות ה-HTTP לשרתי הממשל מחזירות תגובות תקינות (status code 200) ושהתקשורת בין הדפדפן לשרת פועלת כשורה.

**📝 צעדי הבדיקה:**
1. **יירוט בסיסי של 3 בקשות:**
   - הגדרת intercept לכל בקשות ה-GET
   - גישה לעמוד: `https://www.gov.il/he/government-service-branches`
   - המתנה וקליטת 3 בקשות רשת ראשונות
   - אימות שכל בקשה קיבלה תגובה עם status code 200
   - תיעוד URL וקוד סטטוס של כל בקשה

2. **יירוט בקשות ספציפיות:**
   - הגדרת intercepts ממוקדים: API calls, קבצי JSON, נתיבים בעברית
   - גישה לאותו עמוד ממשלתי
   - המתנה לבקשות הספציפיות
   - אימות קודי תגובה 200 או 304 (Not Modified - תגובת cache)

3. **יירוט עם דפוסים שונים:**
   - הגדרת intercepts ל-GET ו-POST requests
   - טעינת העמוד וצבירת בקשות
   - המתנה מורחבת (8 שניות) לטעינת כל המשאבים
   - וידוא שנאספו לפחות 3 בקשות תקינות
   - תיעוד מפורט של כל בקשה שנתפסה

---

### 📅 בדיקה #3: זיהוי שירותי תורים
**קובץ:** `3-services-appointment-check.cy.js`  
**תוצאה:** ✅ 2/2 בדיקות עברו בהצלחה

**🎯 מטרת הבדיקה:**  
לזהות ולאמת את נוכחותם של שירותי קביעת תורים באתר רשות האוכלוסין, כולל זיהוי מילות מפתח רלוונטיות בעברית ובאנגלית.

**📝 צעדי הבדיקה:**
1. **חיפוש מקיף של מילת המפתח "appointment":**
   - גישה לעמוד רשות האוכלוסין: `https://govisit.gov.il/he/authorities/authority/262`
   - המתנה מורחבת (12 שניות) לטעינת מלאה של התוכן
   - סריקת תוכן הדף לזיהוי מילת "appointment"
   - תיעוד אורך התוכן ומספר התוויים בדף
   - זיהוי אלמנטים המכילים את המילה במבנה ה-HTML
   - בדיקת קליקים על אלמנטים רלוונטיים
   - אימות שה-URL לאחר הקליק מכיל מילות מפתח של תורים
   - חזרה אחורה והמשך סריקה
   - חיפוש חלופי של מונחים בעברית: תור, זימון, קביעת, בקשה

2. **זיהוי ווידוא מדויק של מילות appointment:**
   - סריקה מקיפה של התוכן לכל הווריאציות: appointment, appointments, appointment-, appoint
   - מיפוי מדויק של כל אלמנט המכיל את המילה
   - תיעוד: tag name, טקסט האלמנט, מיקום ב-DOM
   - בדיקת אלמנטים הניתנים ללחיצה (links, buttons)
   - שמירת ה-URL המקורי
   - לחיצה על האלמנט ובדיקת שינוי ב-URL
   - אימות נוכחות מילות מפתח נוספות: book, schedule, booking
   - ספירת מספר הופעות המילה "appointment" בעמוד החדש
   - חזרה לעמוד הקודם
   - במקרה של אי-מציאה: חיפוש מונחים בעברית כגיבוי

---

### 🎨 בדיקה #3א: רכיבי ממשק משתמש לתורים
**קובץ:** `3-components-appointment-ui-test.cy.js`  
**תוצאה:** ✅ 4/4 בדיקות עברו בהצלחה

**🎯 מטרת הבדיקה:**  
לבדוק את איכות ונגישות רכיבי ממשק המשתמש הקשורים לקביעת תורים, כולל אפקטי hover, צבעים, ונגישות.

**📝 צעדי הבדיקה:**
1. **זיהוי ובדיקת אלמנטי UI:**
   - גישה לעמוד רשות האוכלוסין
   - חיפוש אלמנטים עם מונחים: "זימון תור", "קביעת תור", "תיאום פגישה", "appointment"
   - תיעוד מספר האלמנטים שנמצאו
   - לולאה על 3 האלמנטים הראשונים
   - זיהוי סוג האלמנט (link, button) ובדיקת אפשרות לחיצה
   - הפעלת אפקט hover על האלמנט
   - בדיקת שינויי צבע (color, backgroundColor)
   - תיעוד ערכי ה-CSS שהתקבלו

2. **בדיקת התנהגות ניווט:**
   - איתור אלמנטים ניתנים ללחיצה עם טקסט רלוונטי
   - הפעלת אפקט mouseover
   - בדיקת סמן העכבר (cursor: pointer)
   - אימות נוכחות attributes כמו href, onclick
   - תיעוד כל התכונות של האלמנט

3. **אימות תצוגה ונגישות:**
   - איתור אלמנט ראשון עם מונח תורים
   - אימות נראות (visibility)
   - הפעלת hover ובדיקת שינויי סטייל
   - תיעוד צבעי טקסט, רקע, וסמן
   - בדיקת תכונות נגישות: aria-label, role, tabindex
   - ניסיון focus על האלמנט (אם ניתן)
   - אימות קבלת focus
   - תיעוד סוג ה-tag וכל תכונות הנגישות

4. **בדיקת אלמנטי טפסים:**
   - סריקת כל שדות הקלט, תפריטים נפתחים, ו-textarea בדף
   - בדיקת כל שדה עבור תכונות: placeholder, name, id
   - חיפוש שדות המכילים מילים כמו "תור", "appointment", "זימון"
   - אימות נראות של שדות רלוונטיים
   - תיעוד כל שדה טופס שנמצא קשור לתורים

---

### 🔄 בדיקה #4: שינוי תגובות API ממשלתיות
**קובץ:** `4-mainbanner-response-change.cy.js`  
**תוצאה:** ✅ 4/4 בדיקות עברו בהצלחה

**🎯 מטרת הבדיקה:**  
להדגים יכולת מתקדמת של יירוט ושינוי תגובות API באמצעות Cypress, תוך עבודה עם APIs ממשלתיות אמיתיות מאתרי ממשל ישראליים.

**📝 צעדי הבדיקה:**
1. **הדגמת לכידה ושינוי API:**
   - גישה לעמוד הבית של gov.il
   - הגדרת intercept ללכידת בקשות API
   - שמירת נתוני ה-API שנתפסו במשתנה
   - הגדרת intercept לשינוי תגובות על endpoint מבחן
   - הגדרת תגובה מותאמת עם: הודעה, timestamp, נתונים מקוריים
   - רענון העמוד להפעלת קריאות API
   - וידוא שהמערכת תפסה את הנתונים
   - תיעוד הצלחה: ביקור באתר, הגדרת intercept, לכידת נתונים, שינוי תגובות

2. **בדיקת API משרד ראש הממשלה:**
   - גישה ל: `https://www.gov.il/he/departments/prime_ministers_office/govil-landing-page`
   - המתנה לטעינת העמוד (5 שניות)
   - הגדרת intercept עם שינוי מלא של תגובת API
   - החזרת תגובה מותאמת הכוללת:
     - מקור השינוי: "Prime Ministers Office API"
     - ה-URL המקורי של הבקשה
     - טקסט הדגמה: "This response was modified by Cypress"
     - מזהה מקור: "prime_ministers_office"
   - אימות נראות הדף
   - תיעוד השלמת הבדיקה

3. **בדיקת API משרד בטחון הפנים:**
   - גישה ל: `https://www.gov.il/he/departments/ministry_of_public_security/govil-landing-page`
   - המתנה לטעינת העמוד
   - הגדרת intercept עם שינוי תגובה ספציפי למשרד בטחון הפנים
   - החזרת תגובה מותאמת עם שדות נוספים:
     - מקור: "Ministry of Public Security API"
     - רמת אבטחה: "public"
     - מזהה מקור: "ministry_of_public_security"
   - אימות תצוגת הדף
   - תיעוד הצלחה

4. **הדגמה עם API אמיתית של govisit.gov.il:**
   - גישה לעמוד שירות ממשלתי: `https://govisit.gov.il/he/authorities/authority/262`
   - המתנה מורחבת (8 שניות) לטעינה מלאה
   - הגדרת intercepts לשני APIs אמיתיים שזוהו:
     - `/API/ServicesAPI/api/authority/262`
     - `/assets/i18n/he.*.json`
   - רענון הדף להפעלת ה-APIs
   - המתנה 5 שניות לקליטת הנתונים
   - הגדרת intercept להדגמת שינוי עם נתונים שנלכדו
   - החזרת תגובה מותאמת המכילה:
     - הודעת הצלחה
     - מקור: אתר ממשלתי אמיתי
     - מזהה: govisit.gov.il
     - סוג בדיקה: government_api_modification
     - חותמת זמן
   - תיעוד השלמת כל דרישות משימה 4

---

## 📊 סיכום וסטטיסטיקות

**סה"כ בדיקות:** 16 בדיקות  
**אחוז הצלחה:** 100% ✅  
**זמן ריצה כולל:** ~3 דקות  
**אתרי ממשל נבדקים:** 5+ אתרים רשמיים

### טכנולוגיות ופתרונות מתקדמים שיושמו:
✅ פתרון חסימות CORS עם `chromeWebSecurity: false`  
✅ טיפול ב-DOM detachment בעזרת aliases  
✅ timeouts מותאמים לאתרי ממשל (עד 300 שניות)  
✅ אינטגרציה עם APIs ממשלתיות אמיתיות  
✅ תמיכה מלאה בעברית (RTL)  
✅ זיהוי מתקדם של מילות מפתח במספר שפות  

### 🎥 תיעוד ווידאו
כל הבדיקות תועדו בווידאו ונמצאות בתיקייה `videos/`:
- test1-search-components.mp4
- test2-intercept-requests.mp4
- test3-appointment-services.mp4
- test3a-appointment-ui.mp4
- test4-api-modification.mp4

---

## 🎓 מה למדתי מהפרויקט?

1. **עבודה עם אתרי ממשל מורכבים** - התמודדות עם אתגרי אבטחה, CORS, וטעינות איטיות
2. **Cypress ברמה מתקדמת** - יירוט API, שינוי תגובות, וטיפול באלמנטים דינמיים
3. **בדיקות רב-לשוניות** - תמיכה בעברית ובאנגלית באותה מערכת
4. **פתרון בעיות DOM** - התמודדות עם DOM detachment והפסקת chains
5. **אינטגרציה עם APIs אמיתיים** - עבודה עם APIs ממשלתיים בפועל

---

## 🔗 קישורים למידע נוסף

📂 **קוד מלא:** [GitHub Repository](https://github.com/maya5768/Digital_gov_il_test)  
📹 **סרטוני הדגמה:** תיקיית videos/  
📄 **תיעוד מפורט:** קבצי README.md ו-VIDEOS.md בפרויקט

---

## 💬 סיום

פרויקט זה הוכיח את היכולת שלי לבנות תשתית בדיקות אוטומטית מקצועית ומקיפה לאתרי ממשל ישראליים. 
השימוש ב-Cypress אִפשר לי לבצע בדיקות מתקדמות ואמינות, תוך פתרון אתגרים טכניים מורכבים ותיעוד מלא של התהליך.

אשמח לשמוע מחברי המקצוע על הפרויקט ולקבל משוב! 🚀

#Cypress #AutomationTesting #QA #Testing #E2E #WebTesting #IsraelTech #GovTech #TestAutomation #בדיקותאוטומטיות #QAEngineer
